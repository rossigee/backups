# Destination: S3

Uploads backups to an Amazon S3 bucket (or any S3-compatible service).

**Module**: `backups.destinations.s3`

## Example

```json
{
  "id": "s3-backup",
  "type": "s3",
  "bucket": "my-backup-bucket",
  "region": "eu-west-1",
  "credentials": {
    "aws_access_key_id": "YOUR_ACCESS_KEY_ID",
    "aws_secret_access_key": "YOUR_SECRET_ACCESS_KEY"
  },
  "retention_copies": 7,
  "retention_days": 30
}
```

If `credentials` are omitted, the standard AWS credential chain is used (`~/.aws/credentials`, IAM instance role, environment variables, etc.).

For S3-compatible services (Wasabi, MinIO via boto, etc.), add `endpoint_url`:

```json
{
  "endpoint_url": "https://s3.wasabisys.com"
}
```

## Parameters

| Key | Required | Purpose |
|-----|----------|---------|
| `id` | Yes | Unique identifier for this destination. |
| `bucket` | Yes | S3 bucket name. |
| `region` | Yes | AWS region. |
| `credentials.aws_access_key_id` | No | AWS access key ID. |
| `credentials.aws_secret_access_key` | No | AWS secret access key. |
| `retention_copies` | No | Number of most recent backups to keep. |
| `retention_days` | No | Delete backups older than this many days. |
| `endpoint_url` | No | Custom S3-compatible endpoint URL. |

## Backup path format

```
s3://{bucket}/{source_id}/{timestamp}/{filename}
```
